<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"></meta>
	<title>Overview</title>
	<script src="/jquery-1.9.1.min.js" type="text/javascript"></script>
	<script src="/jquery.flot.js" type="text/javascript"></script>
	<script type="text/javascript">

$(function() {
	var def =  {
 0:		"Channel  0",
 1:		"Channel  1",
 2:		"Channel  2",
 3:		"Channel  3",
 4:		"Channel  4",
 5:		"Channel  5",
 6:		"Channel  6",
 7:		"Channel  7",
 9:		"Channel  9",
 10:		"Channel 10",
 11:		"Channel 11",
 12:		"Channel 12",
 13:		"Channel 13",
 14:		"Channel 14",
 16:		"Channel 16",
 17:		"Channel 17",
 18:		"Channel 18",
 19:		"Channel 19",
 20:		"Channel 20",
 21:		"Channel 21",
 22:		"Channel 22",
 23:		"Channel 23",
 25:		"Channel 25",
 26:		"Channel 26",
 27:		"Channel 26",
 28:		"Channel 28",
 29:		"Channel 29",
 30:		"Channel 30"
	};
        var plot = {};
	var options = {
		lines: {
			show: true,
			steps: true
		},
		xaxis: {
			mode: "time"
		},
		legend: {
		    position: "nw"
		},
                shadowSize: 0
	};
	for (var i in def) { 
		$('#overview').append('<div class="container"><div id="placeholder'+i+'" class="placeholder"></div>')
	}
	for (var i in def) { 
		plot[i] = $.plot("#placeholder"+i, [], options);
	}

	var data = [];
	fetchData()
	function fetchData() {
		for (var i in def) { 
			fetchChannel(i)
		}
		setTimeout(fetchData, 10000);
	}
	function fetchChannel(ch) {
		$.ajax({
			url: "/json/slow?channel="+ch+"&values=3600",
			type: "GET",
			dataType: "json",
                        cache: false,
			success: function(series) {
				var s = [{ label: def[ch]+'<br>'+series["values"][0][1]+"mV", color: "red",  data: series["values"] }];
				plot[ch].setData(s);
                                plot[ch].setupGrid();
                                plot[ch].draw();
			}
		});
	}
});
</script>
<style type="text/css">
	.container {
		border: 1px solid #ddd;
		width: 400px;
		height: 200px;
		float: left;
		padding: 10px 10px 10px 10px;
	}
	.placeholder {
		width: 100%;
		height: 100%;
	}
</style>
</head>
<body>
	<div id="overview">
	</div>
</body>
</html>
